[gd_scene format=3 uid="uid://blorx5pvyh1qf"]

[ext_resource type="Texture2D" uid="uid://cg403pubqubdt" path="res://barkley2/assets/b2_original/images/merged/s_cts_tuberPile.png" id="1_pskhp"]
[ext_resource type="Script" uid="uid://s8sba5471r60" path="res://barkley2/scenes/Objects/_interactiveActor/_braincity/_longinusBase/o_tuber_pile.gd" id="2_tkc66"]
[ext_resource type="Script" uid="uid://brqjwvhoi8eux" path="res://barkley2/resources/B2_Cinema/B2_Script_Legacy.gd" id="3_73i0y"]

[sub_resource type="AtlasTexture" id="AtlasTexture_73i0y"]
atlas = ExtResource("1_pskhp")
region = Rect2(0, 0, 21, 25)

[sub_resource type="AtlasTexture" id="AtlasTexture_2o4xs"]
atlas = ExtResource("1_pskhp")
region = Rect2(21, 0, 21, 25)

[sub_resource type="AtlasTexture" id="AtlasTexture_kpkm1"]
atlas = ExtResource("1_pskhp")
region = Rect2(42, 0, 21, 25)

[sub_resource type="AtlasTexture" id="AtlasTexture_3k2ev"]
atlas = ExtResource("1_pskhp")
region = Rect2(63, 0, 21, 25)

[sub_resource type="AtlasTexture" id="AtlasTexture_7jpmq"]
atlas = ExtResource("1_pskhp")
region = Rect2(84, 0, 21, 25)

[sub_resource type="AtlasTexture" id="AtlasTexture_sccnt"]
atlas = ExtResource("1_pskhp")
region = Rect2(105, 0, 21, 25)

[sub_resource type="AtlasTexture" id="AtlasTexture_vvk15"]
atlas = ExtResource("1_pskhp")
region = Rect2(126, 0, 21, 25)

[sub_resource type="AtlasTexture" id="AtlasTexture_r14by"]
atlas = ExtResource("1_pskhp")
region = Rect2(147, 0, 21, 25)

[sub_resource type="AtlasTexture" id="AtlasTexture_jc5dw"]
atlas = ExtResource("1_pskhp")
region = Rect2(168, 0, 21, 25)

[sub_resource type="AtlasTexture" id="AtlasTexture_egato"]
atlas = ExtResource("1_pskhp")
region = Rect2(189, 0, 21, 25)

[sub_resource type="AtlasTexture" id="AtlasTexture_m3nsm"]
atlas = ExtResource("1_pskhp")
region = Rect2(210, 0, 21, 25)

[sub_resource type="AtlasTexture" id="AtlasTexture_464xa"]
atlas = ExtResource("1_pskhp")
region = Rect2(231, 0, 21, 25)

[sub_resource type="AtlasTexture" id="AtlasTexture_n033x"]
atlas = ExtResource("1_pskhp")
region = Rect2(252, 0, 21, 25)

[sub_resource type="AtlasTexture" id="AtlasTexture_yaogr"]
atlas = ExtResource("1_pskhp")
region = Rect2(273, 0, 21, 25)

[sub_resource type="AtlasTexture" id="AtlasTexture_uybhj"]
atlas = ExtResource("1_pskhp")
region = Rect2(294, 0, 21, 25)

[sub_resource type="AtlasTexture" id="AtlasTexture_quvex"]
atlas = ExtResource("1_pskhp")
region = Rect2(315, 0, 21, 25)

[sub_resource type="AtlasTexture" id="AtlasTexture_psfxx"]
atlas = ExtResource("1_pskhp")
region = Rect2(336, 0, 21, 25)

[sub_resource type="AtlasTexture" id="AtlasTexture_bejyi"]
atlas = ExtResource("1_pskhp")
region = Rect2(357, 0, 21, 25)

[sub_resource type="AtlasTexture" id="AtlasTexture_gfle6"]
atlas = ExtResource("1_pskhp")
region = Rect2(378, 0, 21, 25)

[sub_resource type="AtlasTexture" id="AtlasTexture_unafj"]
atlas = ExtResource("1_pskhp")
region = Rect2(399, 0, 21, 25)

[sub_resource type="AtlasTexture" id="AtlasTexture_414j6"]
atlas = ExtResource("1_pskhp")
region = Rect2(420, 0, 21, 25)

[sub_resource type="SpriteFrames" id="SpriteFrames_xkj3s"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_73i0y")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2o4xs")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_kpkm1")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3k2ev")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7jpmq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_sccnt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_vvk15")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_r14by")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jc5dw")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_egato")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_m3nsm")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_464xa")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_n033x")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_yaogr")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_uybhj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_quvex")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_psfxx")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bejyi")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gfle6")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_unafj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_414j6")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}]

[sub_resource type="Resource" id="Resource_2o4xs"]
script = ExtResource("3_73i0y")
original_script = "IF tuberPeel == 1 | GOTO | REPORT_IN
IF tuberPeel == 2 | GOTO | START_PEELING

REPORT_IN
DIALOG | P_NAME | These must be infamous tubers...
DIALOG | P_NAME | I'd better report in to that Chandragupta guy before I start peeling.

TUBER_PEEL
PLAYSET| o_cts_hoopz | peeling1 | peeling2
WAIT   | 0
EVENT  | o_tuberPeels | 0
PLAYSET| o_cts_hoopz | peeling3 | peeling4
WAIT   | 0
EVENT  | o_tuberPile | 10
EVENT  | o_peeledTubers | 0
PLAYSET| o_cts_hoopz | peeling5 | peeling0
RETURN

START_PEELING
DIALOG | P_NAME | Alright, tubers. Prepare to meet your maker.
FADE   | 1 | 1
WAIT   | 1
QUEST  | tuberPeel = 3
Misc   | set  | o_cts_hoopz | o_cinema10
Camera | snap | o_cts_hoopz
FRAME  | CAMERA_FAST | o_cts_hoopz
SET    | o_cts_hoopz | peelSit0
Misc   | shadow | o_cts_hoopz | 0
Light  | add    | o_cinema11 | 128 | 0.1 | \" + string(c_gray) + \"
FADE   | 0 | 1
WAIT   | 1
DIALOG | P_NAME | How hard can it be?
SET    | o_cts_hoopz | peelSit0
PLAYSET| o_cts_hoopz | peelSit1 | peelSit2
WAIT   | 0
EVENT  | o_tuberPile | 10
PLAYSET| o_cts_hoopz | peelSit3 | peelSit0
WAIT   | 0
PLAYSET| o_cts_hoopz | peeling1 | peeling2
WAIT   | 0
EVENT  | o_tuberPeels | 0
PLAYSET| o_cts_hoopz | peeling3 | peeling4
WAIT   | 0
EVENT  | o_tuberPile | 10
EVENT  | o_peeledTubers | 0
PLAYSET| o_cts_hoopz | peeling5 | peeling0
DIALOG | P_NAME | Easy does it.
GOTO | TUBER_PEEL
DIALOG | P_NAME = s_port_hoopzSmirk | Heh. Two down.
GOTO | TUBER_PEEL
DIALOG | P_NAME | Ugh...
GOTO | TUBER_PEEL
DIALOG | P_NAME | Uggghhhhh...
GOTO | TUBER_PEEL
DIALOG | P_NAME | So...
GOTO | TUBER_PEEL
DIALOG | P_NAME | Hard...
GOTO | TUBER_PEEL
DIALOG | P_NAME | ...
LensFlare | create | 260 | 34 | 132 | 130 | 196 | 50 | 2
GOTO | TUBER_PEEL
DIALOG | P_NAME | I see it now. Their deepest secrets revealed to me.
LensFlare | create | 292 | 34 | 100 | 130 | 196 | 50 | 4
WAIT   | 2
GOTO | TUBER_PEEL
DIALOG | P_NAME | The hue of these golden rinds glisten as they part from the ecru interior of these hefty tubers. The flash of these brilliant earthly tones reminds me of...
CHOICE | The tubers remind me of...
REPLY  | CANDY  | A scrumptious morsel of butterscotch.
REPLY  | VIDCON | A controller cable, proudly unfurled.
REPLY  | MOTHER | A mother.

CANDY
DIALOG | P_NAME | What else but an original delicacy of scotch and butter?  I could probably sneak a taste of one if my pockets were so lucky. But for now, back to these tubers...
QUEST  | rmTab += 1
QUEST  | rmCandy += 1
GOTO   | PART_2

VIDCON
DIALOG | P_NAME | These twist like coaxial cables spreading out of my favorite system. Surely the conquest of a vidcon is more constructive than peeling these stupid roots...
QUEST  | rmTab += 1
QUEST  | rmVidcon += 1
GOTO   | PART_2

MOTHER
DIALOG | P_NAME | Do I even have a mother? If so, I hope I peel tubers like she would have...
// TODO: ROUNDMOUND
GOTO   | PART_2

PART_2
GOTO | TUBER_PEEL
DIALOG | P_NAME | As I sit here peeling, I wonder...
GOTO | TUBER_PEEL
DIALOG | P_NAME | Am I peeling the tubers?
GOTO | TUBER_PEEL
DIALOG | P_NAME | Or are they peeling me?
GOTO | TUBER_PEEL
DIALOG | P_NAME = s_port_hoopzAngry | UGGGGHHHHH!!!
GOTO | TUBER_PEEL
DIALOG | P_NAME = s_port_hoopzAngry | UNGH!
GOTO | TUBER_PEEL
DIALOG | P_NAME = s_port_hoopzAngry | OURGH!!!
GOTO | TUBER_PEEL
DIALOG | P_NAME = s_port_hoopzSad | Hngh...
GOTO | TUBER_PEEL
DIALOG | P_NAME = s_port_hoopzSad | Hhhnn... Hnghhhhh...
GOTO | TUBER_PEEL
DIALOG | P_NAME = s_port_hoopzSad | Almost... Done...
GOTO | TUBER_PEEL
DIALOG | P_NAME = s_port_hoopzSad | Just... One... More... Tuber...
PLAYSET| o_cts_hoopz | peeling1 | peeling2
WAIT   | 0
EVENT  | o_tuberPeels | 0
WAIT   | 1
DIALOG | P_NAME = s_port_hoopzHappy | No more! No more tubers!
WAIT   | 0.5
DIALOG | P_NAME | Time to head back to Brain City, and bring these fine tubers to the commander.
FADE   | 1 | 1
WAIT   | 1
Teleport | r_usw_rootstock01 | 792 | 320 | 1"
metadata/_custom_type_script = "uid://brqjwvhoi8eux"

[sub_resource type="CircleShape2D" id="CircleShape2D_kpkm1"]
radius = 21.0

[sub_resource type="CircleShape2D" id="CircleShape2D_3k2ev"]

[node name="o_tuberPile" type="AnimatedSprite2D" unique_id=380807042 node_paths=PackedStringArray("mouse_detection_area")]
sprite_frames = SubResource("SpriteFrames_xkj3s")
centered = false
offset = Vector2(-10, -12)
script = ExtResource("2_tkc66")
mouse_detection_area = NodePath("Area2D")
cutscene_script = SubResource("Resource_2o4xs")
metadata/default = {
"bbox_bottom": "24",
"bbox_left": "1",
"bbox_right": "20",
"bbox_top": "1",
"height": "25",
"name": "s_cts_tuberPile",
"width": "21",
"xorig": "10",
"yorigin": "12"
}

[node name="Area2D" type="Area2D" parent="." unique_id=1465479007]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Area2D" unique_id=1994364601]
shape = SubResource("CircleShape2D_kpkm1")

[node name="StaticBody2D" type="StaticBody2D" parent="." unique_id=645024796]

[node name="CollisionShape2D" type="CollisionShape2D" parent="StaticBody2D" unique_id=989220661]
shape = SubResource("CircleShape2D_3k2ev")
