[gd_scene format=3 uid="uid://myfr0v4o136a"]

[ext_resource type="Script" uid="uid://daukx1am63ri" path="res://barkley2/scenes/Objects/_interactiveActor/_tirnanog/_vrden/o_cuthbert01.gd" id="1_jq8f2"]
[ext_resource type="Script" uid="uid://brqjwvhoi8eux" path="res://barkley2/resources/B2_Cinema/B2_Script_Legacy.gd" id="2_nec8w"]
[ext_resource type="Texture2D" uid="uid://8u4ctvrfnyl5" path="res://barkley2/assets/b2_original/images/merged/s_cuthbert01.png" id="2_rvi62"]

[sub_resource type="Resource" id="Resource_0kspv"]
script = ExtResource("2_nec8w")
original_script = "IF body == governor   | GOTO | GOV
IF ericQuest >= 2     | GOTO | ERIC
IF cuthbertState == 0 | GOTO | CUTH0
IF cuthbertState == 1 | GOTO | CUTH1

GOV
DIALOG | Cuthbert | G-governor! Oh, uh, I wasn't expecting you to visit my humble shop. Otherwise I would've cleaned up this mess.
DIALOG | Governor Elagabalus | At ease citizen. I am not here to stir up trouble. I'm the governor after all, not some punk kid with a mohawk.
DIALOG | Cuthbert | Yes, of course. Well, if you need a pet then I, uh, I've got some here but I don't think any of them are a suitable fit for a govenor...

CUTH0
DIALOG | Cuthbert | You looking for an animal companion? Dog? Cat? Lizard? Goldfish?
QUEST  | cuthbertState = 1 
GOTO   | CUTHCHOICE

CUTH1
DIALOG | Cuthbert | *Sigh* ...It doesn't look too good for the ol' pet shop...
DIALOG | P_NAME   | Hey, cheer up mister. You'll pull through.
DIALOG | Cuthbert | You think so? I don't know about that, kid. No one seems to be interested in pets around here. I guess they have more urgent things to worry about...

CUTHCHOICE
CHOICE | Well, actually...
IF wilmerEvict == 1 | IF cuthbertHousingDept == 0 | REPLY | MORTGAGE | Where's the Housing Department?
IF cuthbertMount == 0 | REPLY | MOUNT | Got any sweet mounts?
REPLY | NOINTEREST | Not really interested in pets.

MORTGAGE
DIALOG | P_NAME   | Sorry no pets just now, I'm looking for the Housing Department.
DIALOG | Cuthbert | Housing Department? Well since I can't afford a house and sleep in a dry aquarium here, I don't really know much about housing... I know where the Department of Pet Accountability is. Does that help?
DIALOG | P_NAME   | I don't think he has any pets...
DIALOG | Cuthbert | Nobody here does...
DIALOG | Cuthbert | Anyways try the west side of town, it's just housing tenements over here mostly.
DIALOG | P_NAME   | Okay, thanks!
QUEST  | cuthbertHousingDept = 1
QUEST  | knowCuthbert = 1
QUEST  | stateCuthbert = 1

MOUNT
DIALOG | P_NAME   | I'm looking for fast travel options. Particularly with buffs to resistances.
DIALOG | Cuthbert | Uh... I have mostly malnourished goldfish.
DIALOG | P_NAME   | Dang...
DIALOG | Cuthbert | Sigh... I promise I'll let you know if I get some in, kid. It's not easy running a pet store in Tir na Nog, especially when nobody knows this crummy place even exists. All that neon signage was such a waste of money. If only I had somebody to promote the store...
QUEST  | cuthbertMount = 1
QUEST  | knowCuthbert = 1
QUEST  | stateCuthbert = 1

NOINTEREST
DIALOG | P_NAME   | Nope, sorry. Not really interested in pets.
DIALOG | Cuthbert | Sigh... nobody is. It's not easy running a pet store in Tir na Nog, especially when nobody knows this crummy place even exists. All that neon signage was such a waste of money. If only I had somebody to promote the store...
QUEST  | knowCuthbert = 1
QUEST  | stateCuthbert = 1

ERIC
IF ericQuest == 2 | GOTO | ASKJOB
IF ericQuest == 3 | GOTO | AGREEDTOMAKEERICAPPLY
IF ericQuest == 4 | GOTO | AGREEDTOMAKEERICAPPLY
IF ericQuest == 5 | GOTO | RESUMEDONE
IF ericQuest == 6 | GOTO | RESUMEDISLIKE
IF ericQuest == 7 | GOTO | RESUMENEUTRAL
IF ericQuest == 8 | GOTO | RESUMELIKE
IF ericQuest == 9 | GOTO | HOPELIVES

ASKJOB
DIALOG | P_NAME   | Hi, so are you officially hiring right now?
DIALOG | Cuthbert | Well, I can't really afford to keep someone on for too long. But... but I think I've got a job you could do. Do you have any promoting experience? Do you think you could maybe advertise the place, convince people to check us out and get a pet?
DIALOG | P_NAME   | Well, I'm asking for a friend but I think that would be right up his alley.
DIALOG | Cuthbert | Okay, great! I'm excited to see what your friend's skills and qualifications are. `sq`Here, take this application and get your friend to fill it out.`rt` It's just basic resume stuff.
NOTIFY | Got Pet Shop Application.
NOTE   | take     | Pet Shop Application
DIALOG | P_NAME   | (Resume, huh...)
QUEST  | ericQuest = 3
QUEST  | knowCuthbert = 1
QUEST  | stateCuthbert = 1

AGREEDTOMAKEERICAPPLY
DIALOG | Cuthbert | Hey youngster. `sq`Did your friend fill up all that paperwork yet?`rt`
DIALOG | P_NAME   | No, uh, not yet.
DIALOG | Cuthbert | Hurry it up then! I could really use the help right now.

RESUMEDONE
DIALOG | Cuthbert | Hey, you're back! `sq`You got your friend's resume for me?`rt`
CHOICE | Give Eric's application to Cuthbert?
REPLY  | NOPE | Not yet.
REPLY  | YEAH | Yeah.

NOPE
DIALOG | P_NAME   | Umm, hold on, lemme make sure it's ready.
DIALOG | Cuthbert | Okay, I'm pretty desperate for someone to start working soon though...

YEAH
NOTE | select | Cuthbert Resume
IF note == exit | GOTO | SUBMIT_EXIT
IF note == none | GOTO | SUBMIT_NONE
IF note == Completed Application | GOTO | SUBMIT_COMPLETE
IF note == Pet Manifesto | GOTO | MANIFESTOFIRST
GOTO | SUBMIT_FAIL

MANIFESTOFIRST
DIALOG | P_NAME | Check this out.
USEAT | o_cuthbert01
WAIT | 0.5
DIALOG | Cuthbert | What the `w1`hudge`w0` is this? I'd call this more a `kw`cover letter`rt` than a resume!
DIALOG | P_NAME | `w1`Whoopsies!`w0` Let me try that again...
GOTO | YEAH

SUBMIT_FAIL
DIALOG | P_NAME   | Yeah... Here it is!
USEAT | o_cuthbert01
WAIT | 0.5
DIALOG | Cuthbert | What the hell is this? You said you had his application.
DIALOG | P_NAME   | I must have got my notes mixed up, hold on...
GOTO   | YEAH

SUBMIT_COMPLETE
DIALOG | P_NAME   | Yeah... Here it is!
NOTIFY | Gave Cuthbert the Completed Application.
NOTE   | give     | Completed Application
DIALOG | Cuthbert | Great. You have his cover letter too?
IF petManifestoReceived == 1 | GOTO | HAVEMANIFESTO
GOTO   | NOCOVERLETTER

SUBMIT_EXIT
DIALOG | P_NAME   | On second thought, nevermind.

SUBMIT_NONE
DIALOG | P_NAME   | Oh crud, I don't have it.
DIALOG | Cuthbert | Then come back when you do.

HAVEMANIFESTO
DIALOG | P_NAME   | (I have Eric's Pet Manifesto... Should I give that?)
NOTE   | select | Cuthbert Cover
IF note == exit | GOTO | MANIFESTO_EXIT
IF note == none | GOTO | MANIFESTO_EXIT
IF note == Pet Manifesto | GOTO | GIVEMANIFESTO
GOTO   | MANIFESTO_NOT

MANIFESTO_NOT
DIALOG | P_NAME   | (That's not it...)
GOTO   | HAVEMANIFESTO

MANIFESTO_EXIT
DIALOG | P_NAME   | (I'll hold on to the Pet Manifesto...)
GOTO   | NOGIVEMANIFESTO

GIVEMANIFESTO
DIALOG | P_NAME   | ... here's the cover letter. You can tell, he really wants to work.
NOTIFY | Gave Cuthbert the Pet Manifesto
NOTE   | give     | Pet Manifesto
DIALOG | Cuthbert | Huh... the `kw`Pet Manifesto?`rt` Dear Clispaeth, this has got to be 50 pages long! I asked for a cover letter, not a book... okay, um... don't tell your friend, but I'll just hang onto it and read this later. I'm trying to run a business, I don't have time for a novella. But I'll take it as a good sign. I guess your friend must really want this job!
DIALOG | P_NAME   | (I can't believe that went over well...)
DIALOG | Cuthbert | Okay, now for the application itself. Let's see...
QUEST  | petManifestoReceived = 2
QUEST  | petshopApplicationQuality += 3
//TODO: add time into this system in the proper place, check ticket #2056 as Notes should also be added
// 30/01/26 The note above is an original one. no idea what a \"ticket #2056\" was.
IF petshopApplicationQuality >= 13 | GOTO | RESUMEWASGOOD
IF petshopApplicationQuality >= 10 | GOTO | RESUMEWASNEUTRAL
IF petshopApplicationQuality >= 0  | GOTO | RESUMEWASSHIT

NOGIVEMANIFESTO
DIALOG | P_NAME   | Uh, there is no cover letter...
DIALOG | Cuthbert | Huh? Oh... okay. Hm, there was supposed to a cover letter. That's a shame, but I guess I can't complain. At least I'm getting an application. Let's see...
IF petshopApplicationQuality >= 13 | GOTO | RESUMEWASGOOD
IF petshopApplicationQuality >= 10 | GOTO | RESUMEWASNEUTRAL
IF petshopApplicationQuality >= 0  | GOTO | RESUMEWASSHIT

NOCOVERLETTER
DIALOG | P_NAME   | Uh, there is no cover letter...
DIALOG | Cuthbert | Huh? Oh... okay. Hm, there was supposed to a cover letter. That's a shame, but I guess I can't complain. At least I'm getting an application. Let's see...
IF petshopApplicationQuality >= 13 | GOTO | RESUMEWASGOOD
IF petshopApplicationQuality >= 10 | GOTO | RESUMEWASNEUTRAL
IF petshopApplicationQuality >= 0  | GOTO | RESUMEWASSHIT

RESUMEWASGOOD
DIALOG | Cuthbert | Hmmm... this guy, Eric... he seems, uh, passionate about animals.
DIALOG | P_NAME   | Uh, yeah, definitely. He's a big time animal... guy.
DIALOG | Cuthbert | Can't say I've ever seen a resume this colorful before, but I'm not in much of a position to turn down help right now. Alright, tell him he's got his job - I want him here as soon as he can get here. There's a lot of work to do!
DIALOG | P_NAME   | Got it! Thanks, mister! I'll go tell him...! (Unbelievable...)
QUEST  | petEric = 1.2            
QUEST  | petEric += @clock@
QUEST  | ericQuest = 8

RESUMEWASNEUTRAL
DIALOG | Cuthbert | This... this is um... this is really tough. I can't tell if this guy's serious or not.
DIALOG | P_NAME   | I assure you, he's serious. He's extremely serious, actually.
DIALOG | Cuthbert | Well I tell you what, serious or not, this guy needs to learn some professionalism. He can't just phone in an application and expect to get a job just because I'm desperate and going to be destitute if I don't turn the store around! I mean... he can, he totally can. That's my problem. But what a screwed up thing to do! I just want to be a businessman...
DIALOG | P_NAME   | I understand your reservations, he's a strange guy for sure. He definitely cares about pets though. That much I can guarantee.
DIALOG | Cuthbert | Damn... I suppose I'll have to take a chance. I'm not in much of a position to turn down help right now. All right, tell him he's got his job - I want him here as soon as he can get here. There's a lot of work to do!
DIALOG | P_NAME   | Got it! Thanks, mister! I'll go tell him...! (Unbelievable...)
QUEST  | petEric = 1.2            
QUEST  | petEric += @clock@
QUEST  | ericQuest = 7

RESUMEWASSHIT
DIALOG | Cuthbert | Hmmm... what... what the hell is this? Is this some kind of joke?
DIALOG | P_NAME   | N-no, sir! This is Eric's resume! He's kind of a weird guy bu-
DIALOG | Cuthbert | Look, kid. I'm an honest, hard-working guy. I'm not the greatest guy in Tir na Nog but I treat the animals and the people around me with respect. I'm not some crazy fucking animal lunatic, I'm just a tired guy trying to make ends meet in a world I didn't ask for. Is this what kids do these days, kick guys while they're down? Is that what you do? The pet store's not solvent, I'm in debt, people don't even know this place exists. Is that what you do?
DIALOG | P_NAME   | No, mister! I'm not making fun of you, this is Eric's real-
DIALOG | Cuthbert | Just... just go, kid. Just leave me alone.
QUEST  | ericQuest = 6

RESUMEDISLIKE
DIALOG | Cuthbert | I don't know what kind of joke you thought you were pulling by bringing that fake resume down here, but it wasn't funny. I'm not some crazy animal man. Selling animal companions is my business, my life, and it's dangerously close to falling apart. To mock me when my life is this close to disintegrating...
DIALOG | P_NAME   | No, mister, it isn't like that-
DIALOG | Cuthbert | Just get out of here, kid. Just leave me alone.

RESUMENEUTRAL
DIALOG | Cuthbert | I hope this friend of yours is better at working with animals than he is at filling up job applications...

RESUMELIKE
DIALOG | Cuthbert | Maybe my business won't go under after all. This friend of yours might just be the thing I've been looking for.

ERICHIREDNOTHEREYET
DIALOG | P_NAME   | Hey Cuthbert, I let Eric know. I'm sure he'll be here soon. 
DIALOG | Cuthbert | Thanks, kid! Maybe things will turn around here...

HOPELIVES
DIALOG | Cuthbert | Things are slowly turning around. I don't know where you found this friend of yours but he is a clispsend... Well, sort of anyway. I'm hopeful for the future of this pet shop now. Thanks again, kid. I wish I'd have something more to give to you than mere words.
DIALOG | P_NAME   | Hey that's alright mister. I'm just glad I could help.

// DIALOG | Cuthbert | You looking for an animal companion? Dog? Cat? Lizard? Goldfish? Better act fast. I'm pretty sure we're going out of business."

[sub_resource type="AtlasTexture" id="AtlasTexture_ee82j"]
atlas = ExtResource("2_rvi62")
region = Rect2(0, 0, 28, 48)

[sub_resource type="SpriteFrames" id="SpriteFrames_d63c3"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_ee82j")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}]

[sub_resource type="CircleShape2D" id="CircleShape2D_mvv3m"]
radius = 7.00282

[sub_resource type="RectangleShape2D" id="RectangleShape2D_1pkpb"]
size = Vector2(20, 36)

[node name="o_cuthbert01" type="CharacterBody2D" unique_id=1076410039 node_paths=PackedStringArray("mouse_detection_area", "ActorAnim", "ActorCol")]
script = ExtResource("1_jq8f2")
mouse_detection_area = NodePath("ActorInteract")
cutscene_script = SubResource("Resource_0kspv")
ActorAnim = NodePath("ActorAnim")
ActorCol = NodePath("ActorCol")

[node name="ActorAnim" type="AnimatedSprite2D" parent="." unique_id=378970539]
use_parent_material = true
sprite_frames = SubResource("SpriteFrames_d63c3")
centered = false
offset = Vector2(-13, -40)
metadata/default = {
"bbox_bottom": "46",
"bbox_left": "3",
"bbox_right": "25",
"bbox_top": "3",
"frames": ["images\\s_cuthbert01_0.png"],
"height": "48",
"name": "s_cuthbert01",
"width": "28",
"xorig": "13",
"yorigin": "40"
}

[node name="ActorCol" type="CollisionShape2D" parent="." unique_id=205109358]
shape = SubResource("CircleShape2D_mvv3m")

[node name="ActorInteract" type="Area2D" parent="." unique_id=291779086]
position = Vector2(0, -13)

[node name="CollisionShape2D" type="CollisionShape2D" parent="ActorInteract" unique_id=604520160]
shape = SubResource("RectangleShape2D_1pkpb")
