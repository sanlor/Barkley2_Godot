[gd_scene format=3 uid="uid://cm02gfex41gr0"]

[ext_resource type="PhysicsMaterial" uid="uid://dym3u238p6a81" path="res://barkley2/scenes/Player/o_hoopz_physics_material.tres" id="1_6d2l0"]
[ext_resource type="Script" uid="uid://fv07ud5nbmwf" path="res://barkley2/resources/B2_Hierarchy/Combat/PlayerActor_RealTime.gd" id="2_6d2l0"]
[ext_resource type="PackedScene" uid="uid://c54kloot7bcu2" path="res://barkley2/scenes/Objects/System/o_Shadow.tscn" id="2_vnb8r"]
[ext_resource type="Texture2D" uid="uid://dtgih8y1hd7r8" path="res://barkley2/assets/b2_original/images/merged/s_hoopz_lightcone.png" id="3_ac4jf"]
[ext_resource type="Script" uid="uid://otk7jk2eyl55" path="res://barkley2/scenes/Player/debug_data.gd" id="3_y5kte"]
[ext_resource type="Script" uid="uid://cfxucydrvtfvi" path="res://barkley2/resources/B2_AI/ai_player.gd" id="3_ykikx"]
[ext_resource type="PackedScene" uid="uid://bcbxf4scjowqy" path="res://barkley2/scenes/_utilityStation/oStep_Smoke.tscn" id="4_1qnxd"]
[ext_resource type="FontFile" uid="uid://c5asr1c5g1w6h" path="res://barkley2/resources/fonts/fn_small.tres" id="4_jncqf"]
[ext_resource type="Script" uid="uid://dnfb7mklmfjcp" path="res://barkley2/scenes/Player/gun_handler™.gd" id="4_kw4pa"]
[ext_resource type="SpriteFrames" uid="uid://24eor6kh3hdq" path="res://barkley2/resources/Player/hoopz_normal.tres" id="5_qxiei"]
[ext_resource type="SpriteFrames" uid="uid://be8tuhwe6258k" path="res://barkley2/resources/Player/combat_lower_body_normal.tres" id="6_u8bon"]
[ext_resource type="SpriteFrames" uid="uid://dh4nk0fc64erw" path="res://barkley2/resources/Player/combat_arm_back_normal.tres" id="7_grlyk"]
[ext_resource type="SpriteFrames" uid="uid://d1m3bdwt0blc0" path="res://barkley2/resources/Player/combat_upper_body_normal.tres" id="8_yicst"]
[ext_resource type="SpriteFrames" uid="uid://dgnkrv5sdn82d" path="res://barkley2/resources/Player/combat_weapon.tres" id="9_effw1"]
[ext_resource type="SpriteFrames" uid="uid://n7jvr12a1htv" path="res://barkley2/resources/Player/combat_weapon_parts.tres" id="9_ufjxn"]
[ext_resource type="SpriteFrames" uid="uid://ce5btxh5p4nbk" path="res://barkley2/resources/Player/combat_arm_front_normal.tres" id="10_7qowe"]
[ext_resource type="SpriteFrames" uid="uid://dvqqu8i44hek" path="res://barkley2/resources/Player/combat_weapon_spots.tres" id="10_ac4jf"]
[ext_resource type="Material" uid="uid://b01uytrmpw37l" path="res://barkley2/shaders/material/gun_charge_flash.tres" id="13_mcmji"]
[ext_resource type="Texture2D" uid="uid://dp4tnuvq0yojo" path="res://barkley2/assets/b2_original/images/merged/s_GunSpark.png" id="14_jncqf"]
[ext_resource type="Texture2D" uid="uid://dbmn754wm5tb7" path="res://barkley2/assets/cursor/s_curs_gunmode_0.png" id="16_uptpk"]
[ext_resource type="Texture2D" uid="uid://dqdbba4wnsgmq" path="res://barkley2/assets/cursor/s_curs_gunmode_1.png" id="17_ph4w5"]
[ext_resource type="Texture2D" uid="uid://ca2uer1n2rgjh" path="res://barkley2/assets/cursor/s_curs_gunmode_2.png" id="18_hpqxc"]
[ext_resource type="Script" uid="uid://0luqbfm4rhh8" path="res://barkley2/scenes/Player/player_interaction_node.gd" id="19_ph4w5"]
[ext_resource type="Texture2D" uid="uid://dg2gspahteiw6" path="res://barkley2/assets/cursor/s_curs2_0.png" id="19_y5kte"]
[ext_resource type="Texture2D" uid="uid://doehwej7utvu6" path="res://barkley2/assets/cursor/s_curs2_2.png" id="20_jncqf"]
[ext_resource type="Texture2D" uid="uid://ojoqkotd8san" path="res://barkley2/assets/cursor/s_curs2_3.png" id="21_mcmji"]
[ext_resource type="Texture2D" uid="uid://b4hs662bc4lvx" path="res://barkley2/assets/cursor/s_curs2_1.png" id="22_n1076"]
[ext_resource type="Texture2D" uid="uid://kwp4adx8xv1k" path="res://barkley2/assets/cursor/s_curs_0.png" id="23_gcmyv"]
[ext_resource type="Texture2D" uid="uid://xed4c0p862fo" path="res://barkley2/assets/cursor/s_curs_1.png" id="24_083ds"]
[ext_resource type="Texture2D" uid="uid://i1nicnst0a0f" path="res://barkley2/assets/cursor/s_curs_2.png" id="25_oijcr"]

[sub_resource type="LabelSettings" id="LabelSettings_mcmji"]
font = ExtResource("4_jncqf")

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_ufjxn"]
polygon = PackedVector2Array(-7, -8, -7, -20, 0, -25, 7, -20, 7, -8, 7, -2, 0, 1, -7, -2)

[sub_resource type="AtlasTexture" id="AtlasTexture_mcmji"]
atlas = ExtResource("14_jncqf")
region = Rect2(0, 0, 8, 8)

[sub_resource type="AtlasTexture" id="AtlasTexture_n1076"]
atlas = ExtResource("14_jncqf")
region = Rect2(8, 0, 8, 8)

[sub_resource type="AtlasTexture" id="AtlasTexture_gcmyv"]
atlas = ExtResource("14_jncqf")
region = Rect2(16, 0, 8, 8)

[sub_resource type="AtlasTexture" id="AtlasTexture_083ds"]
atlas = ExtResource("14_jncqf")
region = Rect2(24, 0, 8, 8)

[sub_resource type="AtlasTexture" id="AtlasTexture_oijcr"]
atlas = ExtResource("14_jncqf")
region = Rect2(32, 0, 8, 8)

[sub_resource type="SpriteFrames" id="SpriteFrames_dm763"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_mcmji")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_n1076")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gcmyv")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_083ds")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_oijcr")
}, {
"duration": 1.0,
"texture": null
}],
"loop": false,
"name": &"default",
"speed": 7.0
}]

[sub_resource type="CircleShape2D" id="CircleShape2D_aubae"]
radius = 8.0

[sub_resource type="SpriteFrames" id="SpriteFrames_5m4dk"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("16_uptpk")
}, {
"duration": 1.0,
"texture": ExtResource("17_ph4w5")
}, {
"duration": 1.0,
"texture": ExtResource("18_hpqxc")
}],
"loop": true,
"name": &"bulls",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("19_y5kte")
}],
"loop": true,
"name": &"cursor",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("20_jncqf")
}, {
"duration": 1.0,
"texture": ExtResource("21_mcmji")
}],
"loop": true,
"name": &"grab",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("22_n1076")
}],
"loop": true,
"name": &"hand",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("23_gcmyv")
}, {
"duration": 1.0,
"texture": ExtResource("24_083ds")
}, {
"duration": 1.0,
"texture": ExtResource("25_oijcr")
}],
"loop": true,
"name": &"point",
"speed": 5.0
}]

[sub_resource type="CircleShape2D" id="CircleShape2D_uptpk"]
radius = 4.0

[sub_resource type="PlaceholderTexture2D" id="PlaceholderTexture2D_ufjxn"]
size = Vector2(4, 4)

[node name="o_hoopz" type="RigidBody2D" unique_id=1481055960 node_paths=PackedStringArray("combat_upper_sprite", "combat_lower_sprite", "combat_arm_back", "combat_arm_front", "combat_weapon", "combat_weapon_fuse", "combat_weapon_parts", "combat_weapon_spots", "gun_muzzle", "gun_handler", "hoopz_normal_body", "step_smoke", "hit_timer", "i_frame_timer", "flashlight_pivot", "flashlight", "ActorCol", "actor_ai")]
collision_layer = 66
collision_mask = 1573053
mass = 70.0
physics_material_override = ExtResource("1_6d2l0")
gravity_scale = 0.0
lock_rotation = true
contact_monitor = true
max_contacts_reported = 2
linear_damp = 10.0
script = ExtResource("2_6d2l0")
combat_upper_sprite = NodePath("combat_upper_body")
combat_lower_sprite = NodePath("combat_lower_body")
combat_arm_back = NodePath("combat_arm_back")
combat_arm_front = NodePath("combat_arm_front")
combat_weapon = NodePath("combat_weapon")
combat_weapon_fuse = NodePath("combat_weapon/combat_weapon_fuse")
combat_weapon_parts = NodePath("combat_weapon_parts")
combat_weapon_spots = NodePath("combat_weapon_spots")
gun_muzzle = NodePath("gun_muzzle")
gun_handler = NodePath("Gun_Handler™")
hoopz_normal_body = NodePath("hoopz_normal_body")
step_smoke = NodePath("step_smoke")
hit_timer = NodePath("hit_timer")
i_frame_timer = NodePath("i_frame_timer")
flashlight_pivot = NodePath("flashlight_pivot")
flashlight = NodePath("flashlight_pivot/flashlight")
ActorCol = NodePath("hoopz_collision")
walk_speed = 4000000
actor_ai = NodePath("B2_AI_Player")

[node name="debug_data" type="Control" parent="." unique_id=783106441]
visible = false
layout_mode = 3
anchors_preset = 0
offset_left = -55.0
offset_top = -73.0
offset_right = 60.0
offset_bottom = -57.0
script = ExtResource("3_y5kte")

[node name="Label" type="Label" parent="debug_data" unique_id=703425592]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
text = "placeholder"
label_settings = SubResource("LabelSettings_mcmji")
horizontal_alignment = 1
vertical_alignment = 1

[node name="B2_AI_Player" type="Node2D" parent="." unique_id=1542144345]
script = ExtResource("3_ykikx")
metadata/_custom_type_script = "uid://cfxucydrvtfvi"

[node name="Gun_Handler™" type="Node" parent="." unique_id=1629472033]
script = ExtResource("4_kw4pa")

[node name="pre_shooting_timer" type="Timer" parent="Gun_Handler™" unique_id=1928603246]
one_shot = true

[node name="firing_rate" type="Timer" parent="Gun_Handler™" unique_id=1346086576]
one_shot = true

[node name="post_shooting_timer" type="Timer" parent="Gun_Handler™" unique_id=12709739]
one_shot = true

[node name="gun_noises_stream" type="AudioStreamPlayer" parent="Gun_Handler™" unique_id=937169147]
bus = &"Audio"

[node name="constant_stream" type="AudioStreamPlayer" parent="Gun_Handler™" unique_id=921277712]
bus = &"Audio"

[node name="reload_timer" type="Timer" parent="Gun_Handler™" unique_id=548989748]
one_shot = true

[node name="charge_timer" type="Timer" parent="Gun_Handler™" unique_id=1142125575]
wait_time = 0.05

[node name="o_Shadow" parent="." unique_id=2001875984 instance=ExtResource("2_vnb8r")]
scale = Vector2(0.4, 0.2)

[node name="LightOccluder2D" type="LightOccluder2D" parent="." unique_id=686015365]
occluder = SubResource("OccluderPolygon2D_ufjxn")
sdf_collision = false
occluder_light_mask = 3

[node name="step_smoke" parent="." unique_id=1878184245 instance=ExtResource("4_1qnxd")]
position = Vector2(0, -1)
amount = 30

[node name="hoopz_normal_body" type="AnimatedSprite2D" parent="." unique_id=1210760686]
y_sort_enabled = true
sprite_frames = ExtResource("5_qxiei")
animation = &"climbing"
frame_progress = 0.30038652
speed_scale = 2.0
centered = false
offset = Vector2(-22, -41)

[node name="combat_lower_body" type="AnimatedSprite2D" parent="." unique_id=1147757629]
visible = false
sprite_frames = ExtResource("6_u8bon")
animation = &"walk_W"
centered = false
offset = Vector2(-22, -42)

[node name="combat_arm_back" type="AnimatedSprite2D" parent="." unique_id=212494785]
visible = false
sprite_frames = ExtResource("7_grlyk")
animation = &"s_HoopzTorso_Dualguns"
centered = false
offset = Vector2(-22, -41)

[node name="combat_upper_body" type="AnimatedSprite2D" parent="." unique_id=2007948184]
visible = false
sprite_frames = ExtResource("8_yicst")
animation = &"s_HoopzTorso_Armless"
centered = false
offset = Vector2(-22, -41)

[node name="combat_weapon" type="AnimatedSprite2D" parent="." unique_id=313704135]
material = ExtResource("13_mcmji")
position = Vector2(0, -18)
sprite_frames = ExtResource("9_effw1")
animation = &"s_Smg"

[node name="combat_weapon_fuse" type="AnimatedSprite2D" parent="combat_weapon" unique_id=1828979997]
position = Vector2(0, -7)
sprite_frames = SubResource("SpriteFrames_dm763")
frame = 5
frame_progress = 1.0

[node name="combat_weapon_parts" type="AnimatedSprite2D" parent="." unique_id=1872000877]
visible = false
position = Vector2(0, -18)
sprite_frames = ExtResource("9_ufjxn")
animation = &"s_TranqRifle"

[node name="combat_weapon_spots" type="AnimatedSprite2D" parent="." unique_id=403652883]
visible = false
position = Vector2(0, -18)
sprite_frames = ExtResource("10_ac4jf")
animation = &"s_Smg"

[node name="combat_arm_front" type="AnimatedSprite2D" parent="." unique_id=213884619]
visible = false
z_index = 1
sprite_frames = ExtResource("10_7qowe")
animation = &"s_HoopzTorso_Dualguns"
centered = false
offset = Vector2(-22, -41)

[node name="hoopz_collision" type="CollisionShape2D" parent="." unique_id=1020279183]
position = Vector2(0, -5)
shape = SubResource("CircleShape2D_aubae")

[node name="AudioListener2D" type="AudioListener2D" parent="." unique_id=959965020]
current = true

[node name="flashlight_pivot" type="Marker2D" parent="." unique_id=948422664]
position = Vector2(0, -25)

[node name="flashlight" type="PointLight2D" parent="flashlight_pivot" unique_id=248231867]
position = Vector2(3, 53)
rotation = -1.5707964
scale = Vector2(0.5, 0.5)
range_z_max = 90
range_item_cull_mask = 3
shadow_enabled = true
shadow_item_cull_mask = 2
texture = ExtResource("3_ac4jf")
height = 16.0

[node name="aim_origin" type="Marker2D" parent="." unique_id=622699570]
position = Vector2(0, -16)

[node name="aim_reticle" type="AnimatedSprite2D" parent="aim_origin" unique_id=800556907]
visible = false
z_index = 100
z_as_relative = false
sprite_frames = SubResource("SpriteFrames_5m4dk")
animation = &"bulls"
autoplay = "bulls"

[node name="interaction_node" type="Area2D" parent="aim_origin" unique_id=276160330]
editor_description = "Previously called \"Large dong of interaction\".
Used for Gamepad interactions with other actors."
monitoring = false
script = ExtResource("19_ph4w5")

[node name="CollisionShape2D" type="CollisionShape2D" parent="aim_origin/interaction_node" unique_id=1752732736]
shape = SubResource("CircleShape2D_uptpk")
debug_color = Color(0.99460953, 0, 0.226715, 0.25490198)

[node name="debug_text" type="Sprite2D" parent="aim_origin/interaction_node" unique_id=590491528]
visible = false
texture = SubResource("PlaceholderTexture2D_ufjxn")

[node name="gun_muzzle" type="Marker2D" parent="." unique_id=2033472798]

[node name="debug_text" type="Sprite2D" parent="gun_muzzle" unique_id=1389796972]
visible = false
texture = SubResource("PlaceholderTexture2D_ufjxn")

[node name="hit_timer" type="Timer" parent="." unique_id=1908675352]
wait_time = 0.5
one_shot = true

[node name="i_frame_timer" type="Timer" parent="." unique_id=1819711235]
one_shot = true

[connection signal="timeout" from="Gun_Handler™/pre_shooting_timer" to="Gun_Handler™" method="_on_pre_shooting_timer_timeout"]
[connection signal="timeout" from="Gun_Handler™/firing_rate" to="Gun_Handler™" method="_on_firing_rate_timeout"]
[connection signal="timeout" from="Gun_Handler™/post_shooting_timer" to="Gun_Handler™" method="_on_post_shooting_timer_timeout"]
[connection signal="finished" from="Gun_Handler™/gun_noises_stream" to="Gun_Handler™" method="_on_gun_noises_stream_finished"]
[connection signal="timeout" from="Gun_Handler™/reload_timer" to="Gun_Handler™" method="_on_reload_timer_timeout"]
[connection signal="timeout" from="Gun_Handler™/charge_timer" to="Gun_Handler™" method="_on_charge_timer_timeout"]
[connection signal="frame_changed" from="hoopz_normal_body" to="." method="_on_hoopz_normal_body_frame_changed"]
[connection signal="frame_changed" from="combat_lower_body" to="." method="_on_combat_lower_body_frame_changed"]
